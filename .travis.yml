language: java
jdk: openjdk8
sudo: false

dist: trusty
services:
  - xvfb

addons:
  chrome: stable
  firefox: latest
  apt:
    packages:
      - xvfb
env:
  - PROFILE=chrome
  - PROFILE=firefox

before_script:
  - 'export DISPLAY=:99.0'
  - 'export TRAVIS=true'
  - 'sh -e /etc/init.d/xvfb start'
  - sleep 3

script: "mvn -P$PROFILE test"

after_script:
  - "sh -e /etc/init.d/xvfb stop"

cache:
  directories:
  - $HOME/.m2
